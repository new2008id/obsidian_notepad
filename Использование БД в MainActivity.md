#DAO #crash #android #AppInspection
#### Crash во время сборки и потоки

Возможно, при сборке у вас будет происходить `crash` из-за БД. Для этого в базе данных укажите `exportSchema = false`, он нужен для того, чтобы хранить все версия БД в устройстве, обычно стоит `true`.

Также с большой вероятности случился `crash`. Причина будет то, что наш БД будет занимать долго главный поток `Android`, а другим операциям (обрисовка экрана например) будет недоступна это действие из-за того, что главный поток заблокирован из-за БД и по этой причине случится `crash`. Из-за этого нужно создавать специально отдельный поток для БД. 

#### Обходной путь для потоки

Можно обойти данную проблему и сделать так, чтобы андроид разрешил БД занять главный поток. НО ЭТО НУЖНО ДЕЛАТЬ ТОЛЬКО С ЦЕЛЬЮ ТЕСТИРОВАНИЯ РАБОТЫ БД! 

Для этого добавьте перед `build()` такой метод: `allowMainThreadQueries()`. Он `ignored` данную защиту и БД загружается на главном потоке.

>[!warning ] Для того, чтобы проверить БД используется инструмент `App Inspection`

![[Pasted image 20250221154514.png]]